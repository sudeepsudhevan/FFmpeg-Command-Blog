{% extends 'commands/base.html' %}

{% block content %}
<div style="text-align: center; margin-bottom: 3rem;">
    <h1 class="hero-title">
        Master FFmpeg
    </h1>
    <p style="font-size: 1.25rem; color: #94a3b8; max-width: 600px; margin: 0 auto 2rem;">
        Discover, share, and improve the best FFmpeg commands for your video workflows.
    </p>

    <form method="get" style="max-width: 500px; margin: 0 auto;">
        <input type="text" name="q" placeholder="Search commands (e.g., 'mp4 to gif')" value="{{ request.GET.q }}">
    </form>
</div>

<div class="grid-auto-fit">
    {% for command in commands %}
    <a href="{% url 'command_detail' pk=command.pk %}" class="glass"
        style="display: block; padding: 1.5rem; transition: transform 0.2s; text-decoration: none; color: inherit;">
        <h2 style="font-size: 1.25rem; margin-top: 0; color: #fff;">{{ command.title }}</h2>
        <div
            style="font-family: 'Fira Code', monospace; font-size: 0.875rem; color: #38bdf8; margin-bottom: 1rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
            {{ command.command_string }}
        </div>
        <div
            style="font-size: 0.875rem; color: #94a3b8; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
            {{ command.explanation }}
        </div>
        <div style="margin-top: 1rem; font-size: 0.75rem; color: #64748b;">
            By {{ command.author.username }}
        </div>
    </a>
    {% empty %}
    <div style="grid-column: 1/-1; text-align: center; color: #94a3b8;">
        <p>No commands found. Be the first to add one!</p>
        <a href="{% url 'add_command' %}" class="btn btn-primary">Add Command</a>
    </div>
    {% endfor %}
</div>
{% endblock %}