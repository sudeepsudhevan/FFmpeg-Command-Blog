{% extends 'commands/base.html' %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto;">
    <h1 class="mb-4">Dashboard</h1>

    <div class="grid-auto-fit" style="gap: 2rem;">

        <!-- My Commands -->
        <div>
            <h2 class="mb-2 border-bottom-accent" style="font-size: 1.5rem; padding-bottom: 0.5rem;">My Commands</h2>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                {% for command in my_commands %}
                <a href="{% url 'command_detail' pk=command.pk %}" class="glass"
                    style="padding: 1rem; text-decoration: none; color: inherit; display: block;">
                    <div style="font-weight: 600;">{{ command.title }}</div>
                    <div class="text-small text-muted">{{ command.created_at|date:"M d, Y" }}</div>
                </a>
                {% empty %}
                <p class="text-muted">You haven't posted any commands yet.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Pending Reviews -->
        <div>
            <h2 class="mb-2 border-bottom-warning" style="font-size: 1.5rem; padding-bottom: 0.5rem;">Pending Reviews
            </h2>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                {% for review in pending_reviews %}
                <div class="glass" style="padding: 1rem; border-left: 4px solid #fde047;">
                    <div>
                        <strong>
                            {{ review.user.username }}
                        </strong> suggested an edit on
                        <strong>
                            {{ review.original_command.title }}
                        </strong>
                    </div>
                    <a href="{% url 'command_detail' pk=review.original_command.pk %}" class="btn mt-2 text-small"
                        style="background: rgba(255,255,255,0.1);">View</a>
                </div>
                {% empty %}
                <p class="text-muted">No pending reviews.</p>
                {% endfor %}
            </div>
        </div>

        <!-- My Suggestions -->
        <div>
            <h2 class="mb-2 border-bottom-cyan" style="font-size: 1.5rem; padding-bottom: 0.5rem;">My Suggestions</h2>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                {% for suggestion in my_suggestions %}
                <div class="glass" style="padding: 1rem;">
                    <div>On <strong>{{ suggestion.original_command.title }}</strong></div>
                    <div class="text-small mt-2">
                        Status:
                        <span class="
                            {% if suggestion.status == 'APPROVED' %}text-success
                            {% elif suggestion.status == 'REJECTED' %}text-danger
                            {% else %}text-warning{% endif %}
                        ">{{ suggestion.status }}</span>
                    </div>
                </div>
                {% empty %}
                <p class="text-muted">You haven't made any suggestions.</p>
                {% endfor %}
            </div>
        </div>

    </div>
</div>
{% endblock %}